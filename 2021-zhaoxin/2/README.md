# 罗成元 交龙战队视觉部笔试解题报告

## 第二题：路径规划

---

## 介绍

本程序实现了所有梯度。

---

## 如何使用这个程序

输入输出同题目要求。

---

## 我的算法

分类讨论

1. $B + E < P$，则一起走没有意义；
2. $B + E \ge P$，可以证明，最优方案必然是两人先分别按最短路走到一个点 $v$，然后一起按最短路走到点 $n$。
   *Proof.* 如果最优路径中，两人没有一起走，则可以视作两人分别走到点 $n$，然后再一起走到点 $n$（当然这一步对代价没有影响）.
            接下来，考虑最优方案中，两人路径的**第一个**交在点 $u$，我们发现，将两人的路径调整为一起按最短路从 $u \to n$ 一定不会更差。原因如下：记 $dis(u \to n)$ 为 $u \to n$ 的最短路长度，$C$ 为两人 $u \to n$ 路径交集的大小，$B', E'$ 分别为两人 $u \to n$ 路径上不与另一人路径相交的长度。根据最短路定义，有 $C + B', C + E' \ge dis(u \to n)$。我们发现，
            $$
            \begin{aligned}
                 & \text{调整后的路径长度} \\
                =& dis(u \to n) \times P \\
                \le & [C + min(B', E')] \times P \\
                \le & P \times C + min(B', E') \times P \\
                \le & P \times C + (B + E) \times \min(B', E') \\
                \le & P \times C + B \times \min(B', E') + E \times \min(B', E') \\
                \le & P \times C + B \times B' + E \times E' \\
                = & \text{原方案中两人从 } u \to n \text{ 的代价}。
            \end{aligned}
            $$
            而前面不相交的部分，两人按最短路走肯定更优。

综上，最优路径只有两种情况：

1. 两人分别从 $1, 2$ 按最短路走至 $n$，互不影响；
2. 两人分别从 $1, 2$ 按最短路走至某一个点 $v$，再一起按最短路走至点 $n$。

`Dijkstra` 即可。